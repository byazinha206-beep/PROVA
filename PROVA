algoritmo "AFSS_AutoFacilSalesSystem"
var
    // Variáveis para carros
    modelos: vetor[1..100] de caractere
    anos: vetor[1..100] de inteiro
    precos: vetor[1..100] de real
    estoques: vetor[1..100] de inteiro
    totalCarros: inteiro

    // Variáveis para clientes
    clienteNome: caractere
    clienteCPF: caractere
    clienteEmail: caractere

    // Variáveis para compras
    carrosComprados: vetor[1..100] de inteiro
    qtdComprados: vetor[1..100] de inteiro
    totalCompras: inteiro

    // Variáveis auxiliares
    opcao: inteiro
    i, j: inteiro
    anoAtual: inteiro
    precoTotal, descontoTotal, impostoTotal, valorFinal: real
    maiorPreco: real
    somaPrecos: real
    mediaPrecos: real
    posMaiorPreco: inteiro


inicio
    totalCarros <- 0
    totalCompras <- 0
    anoAtual <- 2025 // Atualize conforme o ano atual

    // Menu principal
    repita
        escreval("=== AutoFácil Sales System ===")
        escreval("1. Cadastrar Carro")
        escreval("2. Cadastrar Cliente")
        escreval("3. Registrar Compra")
        escreval("4. Gerar Relatório Final")
        escreval("5. Sair")
        escreva("Escolha uma opção: ")
        leia(opcao)

        escolha opcao
            cadastro 1:
                // Cadastro de Carro
                se totalCarros < 100 entao
                    totalCarros <- totalCarros + 1
                    escreva("Modelo: ")
                    leia(modelos[totalCarros])
                    escreva("Ano: ")
                    leia(anos[totalCarros])
                    enquanto (anos[totalCarros] < 1990) ou (anos[totalCarros] > anoAtual) faca
                        escreva("Ano inválido. Digite novamente: ")
                        leia(anos[totalCarros])
                    fimenquanto
                    escreva("Preço: R$ ")
                    leia(precos[totalCarros])
                    enquanto precos[totalCarros] < 10000 faca
                        escreva("Preço deve ser >= R$10.000. Digite novamente: ")
                        leia(precos[totalCarros])
                    fimenquanto
                    escreva("Estoque: ")
                    leia(estoques[totalCarros])
                senao
                    escreval("Limite de carros cadastrados atingido.")
                fimse
            cadastro 2:
                // Cadastro de Cliente
                escreva("Nome do Cliente: ")
                leia(clienteNome)
                escreva("CPF (11 dígitos): ")
                leia(clienteCPF)
                enquanto comprimento(clienteCPF) <> 11 faca
                    escreva("CPF inválido. Digite novamente: ")
                    leia(clienteCPF)
                fimenquanto
                escreva("Email: ")
                leia(clienteEmail)
                enquanto pos("@", clienteEmail) = 0 faca
                    escreva("Email inválido. Digite novamente: ")
                    leia(clienteEmail)
                fimenquanto
            cadastro 3:
                // Registro de Compra
                escreval("=== Registro de Compra ===")
                escreval("Carros disponíveis:")
                para i de 1 ate totalCarros faca
                    se estoques[i] > 0 entao
                        escreval(i, ". ", modelos[i], " - Ano: ", anos[i], " - Preço: R$ ", precos[i], " - Estoque: ", estoques[i])
                    fimse
                fimpara
                escreva("Digite o número do carro que deseja comprar (0 para finalizar): ")
                leia(i)
                enquanto i <> 0 faca
                    se (i >= 1) e (i <= totalCarros) e (estoques[i] > 0) entao
                        escreva("Quantidade desejada: ")
                        leia(j)
                        se j <= estoques[i] entao
                            totalCompras <- totalCompras + 1
                            carrosComprados[totalCompras] <- i
                            qtdComprados[totalCompras] <- j
                            estoques[i] <- estoques[i] - j
                        senao
                            escreval("Quantidade indisponível em estoque.")
                        fimse
                    senao
                        escreval("Carro inválido ou sem estoque.")
                    fimse
                    escreva("Digite o número do próximo carro (0 para finalizar): ")
                    leia(i)
                fimenquanto
            cadastro 4:
                // Geração de Relatório Final
                escreval("=== Relatório Final ===")
                precoTotal <- 0
                descontoTotal <- 0
                impostoTotal <- 0
                valorFinal <- 0
                maiorPreco <- 0
                somaPrecos <- 0

                escreval("Cliente: ", clienteNome)
                escreval("CPF: ", clienteCPF)
                escreval("Email: ", clienteEmail)
                escreval("Carros Comprados:")
                para i de 1 ate totalCompras faca
                    j <- carrosComprados[i]
                    escreval("- ", modelos[j], " - Ano: ", anos[j], " - Preço: R$ ", precos[j], " - Quantidade: ", qtdComprados[i])
                    precoTotal <- precoTotal + (precos[j] * qtdComprados[i])
                    somaPrecos <- somaPrecos + (precos[j] * qtdComprados[i])
                    se precos[j] > maiorPreco entao
                        maiorPreco <- precos[j]
                        posMaiorPreco <- j
                    fimse
                fimpara

                // Aplicar descontos
                se totalCompras > 2 entao
                    descontoTotal <- descontoTotal + (precoTotal * 0.05)
                fimse
                para i de 1 ate totalCompras faca
                    j <- carrosComprados[i]
                    se anos[j] < anoAtual entao
                        descontoTotal <- descontoTotal + (precos[j] * qtdComprados[i] * 0.10)
                    fimse
                fimpara

                // Aplicar imposto de luxo
                se precoTotal > 100000 entao
                    impostoTotal <- precoTotal * 0.08
                fimse

                valorFinal <- precoTotal - descontoTotal + impostoTotal
                mediaPrecos <- somaPrecos / totalCompras

                escreval("Valor Total sem Desconto: R$ ", precoTotal)
                escreval("Descontos Aplicados: R$ ", descontoTotal)
                escreval("Impostos Aplicados: R$ ", impostoTotal)
                escreval("Valor Final a Pagar: R$ ", valorFinal)
                escreval("Carro Mais Caro Comprado: ", modelos[posMaiorPreco], " - R$ ", maiorPreco)
                escreval("Média de Preços dos Carros Comprados: R$ ", mediaPrecos)
            cadastro 5:
                escreval("Encerrando o sistema...")
            senao
                escreval("Opção inválida.")
        fimescolha
    ate opcao = 5

Fimalgoritmo
